import{a as T,b as d,c as D,d as A,g as k,h as N,i as O,j as M,k as _,l as j,m as R,n as V,o as G,q,s as B}from"./chunk-4QMXXBRT.js";import{a as P}from"./chunk-ZC3RMNY2.js";import{c as F,e as w}from"./chunk-EARDSPXL.js";import{Fa as x,Gb as I,Ja as h,L as C,Lb as E,Qa as g,Ta as r,Ua as i,Va as p,Xa as v,eb as n,fb as S,gb as b,k as m,va as s,za as l}from"./chunk-ZVA6WF5A.js";import{a as c,b as u}from"./chunk-2VMXMS7J.js";var y=class a{mockCategories=[{id:"1",name:"Salary",color:"#10B981",icon:"work",type:"income",userId:"1",createdAt:new Date,updatedAt:new Date},{id:"2",name:"Housing",color:"#EF4444",icon:"home",type:"expense",userId:"1",createdAt:new Date,updatedAt:new Date},{id:"3",name:"Food",color:"#F59E0B",icon:"restaurant",type:"expense",userId:"1",createdAt:new Date,updatedAt:new Date}];getCategories(){return m(this.mockCategories)}getCategory(t){return m(this.mockCategories.find(e=>e.id===t))}createCategory(t){let e=u(c({},t),{id:Date.now().toString(),createdAt:new Date,updatedAt:new Date});return this.mockCategories.push(e),m(e)}updateCategory(t,e){let o=this.mockCategories.findIndex(f=>f.id===t);if(o!==-1)return this.mockCategories[o]=u(c(c({},this.mockCategories[o]),e),{updatedAt:new Date}),m(this.mockCategories[o]);throw new Error("Category not found")}deleteCategory(t){let e=this.mockCategories.findIndex(o=>o.id===t);return e!==-1&&this.mockCategories.splice(e,1),m()}static \u0275fac=function(e){return new(e||a)};static \u0275prov=C({token:a,factory:a.\u0275fac,providedIn:"root"})};function z(a,t){if(a&1&&(r(0,"option",27),n(1),i()),a&2){let e=t.$implicit;g("value",e.id),s(),b(" ",e.name," ")}}var U=class a{constructor(t,e,o,f,J){this.fb=t;this.transactionService=e;this.categoryService=o;this.router=f;this.route=J;this.transactionForm=this.fb.group({amount:["",[d.required,d.min(.01)]],type:["expense",[d.required]],categoryId:["",[d.required]],description:["",[d.required]],date:[new Date().toISOString().split("T")[0],[d.required]]})}transactionForm;categories=[];isEditMode=!1;transactionId=null;ngOnInit(){this.loadCategories(),this.transactionId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.transactionId,this.isEditMode&&this.transactionId&&this.loadTransaction(this.transactionId)}loadCategories(){this.categoryService.getCategories().subscribe(t=>{this.categories=t})}loadTransaction(t){this.transactionService.getTransaction(t).subscribe(e=>{e&&this.transactionForm.patchValue({amount:e.amount,type:e.type,categoryId:e.categoryId,description:e.description,date:new Date(e.date).toISOString().split("T")[0]})})}onSubmit(){if(this.transactionForm.valid){let t=this.transactionForm.value,e=u(c({},t),{date:new Date(t.date),userId:"1"});this.isEditMode&&this.transactionId?this.transactionService.updateTransaction(this.transactionId,e).subscribe(()=>{this.router.navigate(["/transactions"])}):this.transactionService.createTransaction(e).subscribe(()=>{this.router.navigate(["/transactions"])})}}cancel(){this.router.navigate(["/transactions"])}static \u0275fac=function(e){return new(e||a)(l(q),l(P),l(y),l(w),l(F))};static \u0275cmp=x({type:a,selectors:[["app-transaction-form"]],decls:47,vars:6,consts:[[1,"max-w-2xl","mx-auto","space-y-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","space-x-4"],[1,"flex","items-center"],["type","radio","formControlName","type","value","income",1,"mr-2"],[1,"text-green-600"],["type","radio","formControlName","type","value","expense",1,"mr-2"],[1,"text-red-600"],["for","amount",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"absolute","left-3","top-2","text-gray-500"],["type","number","id","amount","formControlName","amount","step","0.01","min","0","placeholder","0.00",1,"w-full","pl-8","pr-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500"],["for","categoryId",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","categoryId","formControlName","categoryId",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","description","formControlName","description","placeholder","Enter transaction description",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500"],["for","date",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","date","id","date","formControlName","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500"],[1,"flex","justify-end","space-x-4","pt-6","border-t"],["type","button",1,"px-4","py-2","text-gray-700","bg-gray-200","rounded-md","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],[3,"value"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div")(2,"h1",1),n(3),i(),r(4,"p",2),n(5),i()(),r(6,"div",3)(7,"form",4),v("ngSubmit",function(){return o.onSubmit()}),r(8,"div")(9,"label",5),n(10,"Transaction Type"),i(),r(11,"div",6)(12,"label",7),p(13,"input",8),r(14,"span",9),n(15,"Income"),i()(),r(16,"label",7),p(17,"input",10),r(18,"span",11),n(19,"Expense"),i()()()(),r(20,"div")(21,"label",12),n(22,"Amount"),i(),r(23,"div",13)(24,"span",14),n(25,"$"),i(),p(26,"input",15),i()(),r(27,"div")(28,"label",16),n(29,"Category"),i(),r(30,"select",17)(31,"option",18),n(32,"Select a category"),i(),h(33,z,2,2,"option",19),i()(),r(34,"div")(35,"label",20),n(36,"Description"),i(),p(37,"input",21),i(),r(38,"div")(39,"label",22),n(40,"Date"),i(),p(41,"input",23),i(),r(42,"div",24)(43,"button",25),v("click",function(){return o.cancel()}),n(44," Cancel "),i(),r(45,"button",26),n(46),i()()()()()),e&2&&(s(3),b(" ",o.isEditMode?"Edit Transaction":"Add New Transaction"," "),s(2),S(o.isEditMode?"Update transaction details":"Enter transaction information"),s(2),g("formGroup",o.transactionForm),s(26),g("ngForOf",o.categories),s(12),g("disabled",!o.transactionForm.valid),s(),b(" ",o.isEditMode?"Update Transaction":"Add Transaction"," "))},dependencies:[E,I,B,k,R,V,T,N,j,O,D,A,G,M,_],encapsulation:2})};export{U as TransactionFormComponent};
